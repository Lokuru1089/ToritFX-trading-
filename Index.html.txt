<?php
include 'config.php';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $name = $_POST['name'];
    $email = $_POST['email'];
    $phone = $_POST['phone'];
    $password = password_hash($_POST['password'], PASSWORD_BCRYPT);
    $referral_code = uniqid();

    $query = $pdo->prepare("INSERT INTO users (name, email, phone, password, referral_code) VALUES (?, ?, ?, ?, ?)");
    if ($query->execute([$name, $email, $phone, $password, $referral_code])) {
        echo "Registration successful! Your referral link: http://yourwebsite.com/register.php?ref=" . $referral_code;
    } else {
        echo "Registration failed!";
    }
}
?>

<form method="POST">
    <input type="text" name="name" placeholder="Full Name" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="text" name="phone" placeholder="Phone Number" required>
    <input type="password" name="password" placeholder="Password" required>
    <button type="submit">Register</button>
</form>